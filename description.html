<!DOCTYPE html>
<html lang="en" xmlns:th = "http://www.thymeleaf.org">
<head th:insert="~{head.html}">
    <meta charset="UTF-8">
    <div class="container">
        <div th:insert="~{navbar.html}">
        </div>
    </div>
    <title>Description</title>
</head>
<body>
<div class="container">


<div th:style="'text-align : center; margin-top : 30px;'">
    <h3 th:text="'Name : ' + ${zat.name}"></h3>
    <img th:src="${zat.image}" class="img-thumbnail shadow p-3 mb-5 bg-body-tertiary rounded" alt="PHOTO" th:style="'width: 300px; height: 200px;'">
    <h3 th:text="'Price : ' +  ${zat.price} + ' tg'"></h3>
    <h3 th:text="'Amount : ' + ${zat.amount}"></h3>





    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#quantityModal">BUY</button>

    <div class="modal fade" id="quantityModal" tabindex="-1" aria-labelledby="quantityModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="quantityModalLabel">Buy option</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h4>Quantity : </h4>
                    <div class="input-group mb-3">
                         <input type="number" class="form-control" id="quantity" value="1" min="1" onkeydown="return false;" oninput="updateSelectedQuantity()">
                    </div>

                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#confirmationModal" data-bs-dismiss="modal">BUY</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="confirmationModal" tabindex="-1" aria-labelledby="confirmationModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmationModalLabel">Подтверждение</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h4>You purchased </h4>
                    <h4>Name : </h4> <p th:text="${zat.name}"> </p>
                    <h4>Quantity : </h4>   <p>  <span id="selectedQuantity"></span></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-bs-dismiss="modal">Confirm</button>
                </div>
            </div>
        </div>
    </div>


    <script>
        const quantityInput = document.getElementById('quantity');
        const selectedQuantity = document.getElementById('selectedQuantity');

        function updateSelectedQuantity() {
            selectedQuantity.textContent = quantityInput.value;
        }
        quantityInput.addEventListener('input', updateSelectedQuantity);

        document.addEventListener('DOMContentLoaded', () => {
            updateSelectedQuantity();
        });
    </script>





    <p style="margin-top: 30px">
        <button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseWidthExample" aria-expanded="false" aria-controls="collapseWidthExample" >
            Description
        </button>
    </p>
<div style="min-height: 100px;">
    <div class="collapse collapse-horizontal" id="collapseWidthExample">
        <div class="card card-body" style="width: 500px;">
    <h6 th:text="${zat.description}" ></h6>
            </div>
</div>
</div>
    <a class="btn btn-primary btn-sm" th:href="@{'/list'}" >
        <h3>Return</h3>
    </a>
</div>
</div>
</body>
</html>